<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Mapa de Habilidades - Fonte Original</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>
    
    <style>
        body {
            background-color: transparent; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            /* Fonte global restaurada */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chart-container {
            width: 700px;
            height: 700px;
            background: transparent; 
            display: flex;
            justify-content: center;
            align-items: center;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        canvas {
            transform: translateZ(50px);
            width: 100% !important;
            height: 100% !important;
            filter: drop-shadow(0px 10px 10px rgba(0,0,0,0.15));
        }
    </style>
</head>
<body>

    <div class="chart-container" id="tiltContainer">
        <canvas id="skillsRadar"></canvas>
    </div>

<script>
    // 1. FUNDO COLORIDO (Vibrante)
    const octagonalBackgroundPlugin = {
        id: 'octagonalBackground',
        beforeDraw: (chart) => {
            const { ctx, scales: { r } } = chart;
            const xCenter = r.xCenter;
            const yCenter = r.yCenter;
            const drawingArea = r.drawingArea;
            const labelsCount = chart.data.labels.length;
            
            const ringColors = [
                'rgba(255, 60, 60, 1)',    // 0-2
                'rgba(255, 140, 0, 1)',    // 2-4
                'rgba(255, 215, 0, 1)',    // 4-6
                'rgba(120, 230, 50, 1)',   // 6-8
                'rgba(0, 180, 70, 1)'      // 8-10
            ];

            for (let level = 5; level > 0; level--) {
                const radius = (drawingArea / 5) * level;
                ctx.beginPath();
                for (let i = 0; i < labelsCount; i++) {
                    const angle = r.getIndexAngle(i) - Math.PI / 2;
                    const x = xCenter + Math.cos(angle) * radius;
                    const y = yCenter + Math.sin(angle) * radius;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.fillStyle = ringColors[level - 1];
                ctx.fill();
            }
        }
    };

    // 2. A "NEBLINA" (Máscara Invertida)
    const invertedFogPlugin = {
        id: 'invertedFog',
        beforeDatasetsDraw: (chart) => {
            const { ctx, scales: { r } } = chart;
            const xCenter = r.xCenter;
            const yCenter = r.yCenter;
            const drawingArea = r.drawingArea;
            
            const datasetMeta = chart.getDatasetMeta(0);
            const points = datasetMeta.data;

            ctx.save();
            ctx.beginPath();

            // Limite externo
            const maxRadius = drawingArea; 
            const labelsCount = chart.data.labels.length;
            
            for (let i = 0; i < labelsCount; i++) {
                const angle = r.getIndexAngle(i) - Math.PI / 2;
                const x = xCenter + Math.cos(angle) * maxRadius;
                const y = yCenter + Math.sin(angle) * maxRadius;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();

            // O "Buraco" (Dados)
            if (points.length > 0) {
                ctx.moveTo(points[0].x, points[0].y);
                for (let i = 1; i < points.length; i++) {
                    ctx.lineTo(points[i].x, points[i].y);
                }
                ctx.closePath();
            }

            // Opacidade branca 0.6 = Cores de fundo visíveis a 40%
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)'; 
            ctx.fill('evenodd');
            ctx.restore();
        }
    };

    // 3. RESTAURADOR DE LINHAS (Grade visível)
    const gridRestorerPlugin = {
        id: 'gridRestorer',
        afterDraw: (chart) => {
            const { ctx, scales: { r } } = chart;
            const xCenter = r.xCenter;
            const yCenter = r.yCenter;
            const drawingArea = r.drawingArea;
            const labelsCount = chart.data.labels.length;

            ctx.save();
            ctx.strokeStyle = 'rgba(0, 0, 0, 0.4)'; 
            ctx.lineWidth = 1;

            // Níveis
            for (let level = 1; level <= 5; level++) {
                const radius = (drawingArea / 5) * level;
                ctx.beginPath();
                for (let i = 0; i < labelsCount; i++) {
                    const angle = r.getIndexAngle(i) - Math.PI / 2;
                    const x = xCenter + Math.cos(angle) * radius;
                    const y = yCenter + Math.sin(angle) * radius;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }

            // Raias
            ctx.beginPath();
            for (let i = 0; i < labelsCount; i++) {
                const angle = r.getIndexAngle(i) - Math.PI / 2;
                const x = xCenter + Math.cos(angle) * drawingArea;
                const y = yCenter + Math.sin(angle) * drawingArea;
                ctx.moveTo(xCenter, yCenter);
                ctx.lineTo(x, y);
            }
            ctx.stroke();
            ctx.restore();
        }
    };

    const ctx = document.getElementById('skillsRadar').getContext('2d');
    
    new Chart(ctx, {
        type: 'radar',
        plugins: [octagonalBackgroundPlugin, invertedFogPlugin, gridRestorerPlugin],
        data: {
            labels: [
                ["GESTÃO DE", "PROCESSOS"], 
                ["INTELIGÊNCIA", "FINANCEIRA"], 
                ["COMUNICAÇÃO", "& INGLÊS"], 
                ["COMPLIANCE", "& ÉTICA"], 
                ["DESENVOLVIMENTO", "TI"], 
                ["AUTONOMIA", "& AUTOGESTÃO"], 
                ["VISÃO", "ANALÍTICA"], 
                "LIDERANÇA"
            ],
            datasets: [{
                data: [9.8, 9.2, 10.0, 8.4, 7.0, 9.6, 9.0, 8.0],
                fill: false, 
                backgroundColor: 'transparent', 
                borderColor: '#000', 
                borderWidth: 2.5,
                pointBackgroundColor: '#000',
                pointRadius: 4,
                lineTension: 0 
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            layout: { padding: 10 },
            scales: {
                r: {
                    grid: { display: false },
                    angleLines: { display: false },
                    min: 0,
                    max: 10,
                    ticks: { display: false },
                    pointLabels: {
                        color: '#808080', // COR DA FONTE
                        font: {
                            size: 13,
                            weight: 'bold'
                        },
                        padding: 10
                    }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });

    VanillaTilt.init(document.querySelector("#tiltContainer"), {
        max: 15,
        speed: 400,
        perspective: 1000,
        scale: 1.12,
        glare: true,
        "max-glare": 0.3,
    });
</script>

</body>
</html>